(function(e,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(e=typeof globalThis<"u"?globalThis:e||self,e["kiri-ui-package"]=d(e.Vue))})(this,(function(e){"use strict";const d=Object.assign({"./kiri-ui/kiri-slide-verify.vue":()=>Promise.resolve().then(()=>T)}),w=function(t){for(const[i,l]of Object.entries(d)){const f=i.slice(i.lastIndexOf("/")+1,i.lastIndexOf("."));t.component(f,e.defineAsyncComponent(l))}},M=(t,i)=>{const l=t.__vccOpts||t;for(const[f,m]of i)l[f]=m;return l},S={class:"success-content"},E={class:"success-info"},T=Object.freeze(Object.defineProperty({__proto__:null,default:M(Object.assign({name:"kiri-slide-verify"},{props:{backgroundImage:{type:String,default:"https://kirii.online/kiri/12.jpg"},width:{type:Number,default:400},height:{type:Number,default:250},tolerance:{type:Number,default:2},shape:{type:String,default:"square",validator:t=>["square","triangle","pentagon","hexagon"].includes(t)}},emits:["success"],setup(t,{emit:i}){const l=t,f=i,m=e.computed(()=>l.shape),u=e.ref(null),z=e.ref(null),c=e.ref(null),h=e.ref(null),n=e.ref(null),b=e.ref(null),o=e.ref(!1),v=e.ref(0),N=e.ref(0),g=e.ref(0),k=e.ref(99);e.onMounted(()=>{n.value.classList.remove("success"),h.value.classList.remove("success")});const V=(a,s)=>(a=Math.ceil(a),s=Math.floor(s),Math.floor(Math.random()*(s-a)+a));let p=V(100,l.width-50),x=V(100,l.height-50),y=!1,$=0,r=0;const B=a=>{o.value||(y=!0,$=a.clientX,v.value=Date.now(),c.value.style.transition="",u.value.style.transition="",n.value.style.transition="")},D=()=>{o.value||(y=!1)},I=a=>{!y||o.value||(r=a.pageX-$,!(r<0||r>l.width-50)&&(n.value.style.width=`${r}px`,c.value.style.transform=`translateX(${r}px`,u.value.style.transform=`translateX(${r}px`))},O=a=>{if(o.value)return;y=!1,r>=p-l.tolerance&&r<=p+Number(l.tolerance)?X():_()},X=()=>{o.value=!0,N.value=Date.now(),g.value=((N.value-v.value)/1e3).toFixed(2);const s=Math.max(0,parseFloat(g.value)-.5),j=Math.floor(s/.5);k.value=Math.max(1,99-j),c.value.style.backgroundColor="#78cabd",n.value.style.backgroundColor="#d4f5f1",n.value.classList.add("success"),h.value.classList.add("success"),b.value.classList.add("success"),f("success",o.value)},_=()=>{o.value=!1,n.value.style.width=0,n.value.style.transition="all 0.3s ease",c.value.style.transform="translateX(0px)",u.value.style.transform="translateX(0px)",c.value.style.transition="transform 0.3s ease",u.value.style.transition="transform 0.3s ease",n.value.classList.remove("success"),h.value.classList.remove("success")};return(a,s)=>(e.openBlock(),e.createElementBlock("div",{class:"drag-verify-container",onMousemove:I,onMouseup:O},[e.createElementVNode("div",{class:"check-container",style:e.normalizeStyle({width:`${t.width}px`,height:`${t.height}px`})},[e.createElementVNode("div",{class:"check",ref:"check",style:e.normalizeStyle({backgroundImage:`url(${t.backgroundImage})`,width:`${t.width}px`,height:`${t.height}px`})},[e.createElementVNode("div",{class:e.normalizeClass(["check-content",`shape-${m.value}`]),style:e.normalizeStyle({left:`${e.unref(p)}px`,top:`${e.unref(x)}px`})},null,6),e.createElementVNode("div",{class:e.normalizeClass(["check-block",`shape-${m.value}`]),ref_key:"checkBlock",ref:u,style:e.normalizeStyle({backgroundPosition:`-${e.unref(p)}px -${e.unref(x)}px`,backgroundSize:`${t.width}px ${t.height}px`,top:`${e.unref(x)}px`})},null,6)],4),o.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"success-mask",style:e.normalizeStyle({width:`${t.width}px`,height:`${t.height}px`})},[e.createElementVNode("div",S,[e.createElementVNode("p",E,[s[0]||(s[0]=e.createTextVNode(" 你只用了 ",-1)),e.createElementVNode("span",null,e.toDisplayString(g.value),1),s[1]||(s[1]=e.createTextVNode(" s完成拼图，成功超越率全国 ",-1)),e.createElementVNode("span",{style:e.normalizeStyle({color:k.value<60?"red":"#04be02",fontSize:"20px"})},e.toDisplayString(k.value),5),s[2]||(s[2]=e.createTextVNode("%的用户 ",-1))])])],4)):e.createCommentVNode("",!0)],4),e.createElementVNode("div",{class:"drag",style:e.normalizeStyle({width:`${t.width}px`}),ref_key:"drag",ref:z},[e.createElementVNode("div",{class:"dragBg",ref_key:"dragBg",ref:n},null,512),e.createElementVNode("div",{class:"drag-block",ref_key:"dragBlock",ref:c,onMousedown:B,onMouseup:D},[e.createElementVNode("span",{class:"slider-icon",ref_key:"sliderIcon",ref:b},null,512)],544),e.createElementVNode("div",{class:"drag-tips",ref_key:"dragTips",ref:h},null,512)],4)],32))}}),[["__scopeId","data-v-be40c0b6"]])},Symbol.toStringTag,{value:"Module"}));return w}));
